

<div class="container">
  <h1>Restaurant Reviews</h1>
  <br/>
  <div class="page"></div>
</div>

<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>

<script>

  // $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
 //      options.url = 'localhost:9393' + options.url;
 //    });
  $.ajaxPrefilter(function(options, originalOptions, jqXHR) {
    options.crossDomain ={
        crossDomain: true
    };
    options.xhrFields = {
        withCredentials: true
    };
});

  var Restaurants = Backbone.Collection.extend({
    url: 'http://localhost:9393/restaurants'
  })


  var RestaurantList = Backbone.View.extend({
    el: '.page',
    render: function(){
      var that = this
      var restaurants =  new Restaurants()
      restaurants.fetch({
        success: function(){
          var that = this
          console.log("this worked")
          that.$el.html("content should show here")
        }
      })
      
    }
  })

  var Router = Backbone.Router.extend({
    routes: {
      '':'home',
    }
  });

  var restaurantList = new RestaurantList();

  var router = new Router();

  router.on('route:home', function(){
      restaurantList.render();
      console.log("will show all restaurants")
   
    });



  Backbone.history.start();
</script>



